Plocka data från hemsida
import requests

#unicef data med api nyckel sdmx(RAW DATA)
url = "https://sdmx.data.unicef.org/ws/public/sdmxapi/rest/data/UNICEF,MNCH,1.0/.MNCH_PNEUCARE._T......?startPeriod=2014&endPeriod=2024&format=csv&labels=name"

#hämtar med requests.get
response = requests.get(url)

#kollar om requesten gick igenom och sparar csv filen
if response.status_code == 200:
   
    with open("unicef_pneumonia_data.csv", "wb") as file:
        file.write(response.content)
    print("CSV file has been downloaded successfully.")
else:
    print(f"Error: {response.status_code} - {response.text}")



#KOD FÖR ATT LÄGGA IN SYDOSTASIATISKA LÄNDERS AMNING OCH LUNGINFLAMMATION I SAMMA FIL

import pandas as pd

# Läs in CSV-filerna
df_amning = pd.read_csv("unicef_amning_data.csv")
df_pneumonia = pd.read_csv("unicef_pneumonia_data.csv")

# Definiera en lista med länder att inkludera, i detta fall Sydostasien
countries_southeastasia = ['Thailand', 'Indonesia', 'Viet Nam', 'Philippines', 'Myanmar', 'Cambodia', 'Timor-Leste', "Lao People's Democratic Republic"]

# Filtrera amningsdata för endast de länder som finns i listan
filtered_amning = df_amning[df_amning['Geographic area'].isin(countries_southeastasia)]
filtered_amning = filtered_amning[['Geographic area', 'Indicator', 'OBS_VALUE']]

# Gruppera amningsdata efter 'Geographic area' och 'Indicator' och beräkna medelvärdet för 'OBS_VALUE'
aggregated_amning = filtered_amning.groupby(['Geographic area', 'Indicator'], as_index=False)['OBS_VALUE'].mean()

# Filtrera pneumonidata för valda länder och där alla tre kolumner är 'Total'
filtered_pneumonia = df_pneumonia[
    (df_pneumonia['Geographic area'].isin(countries_southeastasia)) &
    (df_pneumonia['Wealth Quintile'] == 'Total') &
    (df_pneumonia['Residence'] == 'Total') &
    (df_pneumonia["Mother's Education Level"] == 'Total')
]

# Välj relevanta kolumner från pneumonidatan och byt namn på 'OBS_VALUE'
filtered_pneumonia = filtered_pneumonia[['Geographic area', 'OBS_VALUE']]
filtered_pneumonia = filtered_pneumonia.rename(columns={'OBS_VALUE': 'Pneumonia_Value'}) 
aggregated_pneumonia = mean_pneumonia = filtered_pneumonia.groupby('Geographic area')['Pneumonia_Value'].mean().reset_index()

# Slå ihop amnings- och pneumonidata
merged_data = pd.merge(aggregated_amning, mean_pneumonia, on='Geographic area', how='left')

# Spara den sammanslagna datan till en ny CSV-fil
merged_data.to_csv("selected_countries_amning_and_pneumoni_data.csv", index=False)

print("Ny CSV-fil med amningsdata och pneumonidata för valda länder har skapats.")

import pandas as pd

def merge_data_for_countries(countries):
   .

    # Läs in data från fasta filvägar
    df_amning = pd.read_csv("unicef_amning_data.csv")
    df_pneumonia = pd.read_csv("unicef_pneumonia_data.csv")
    
    # Filtrera amningsdata för de valda länderna
    filtered_amning = df_amning[df_amning['Geographic area'].isin(countries)]
    filtered_amning = filtered_amning[['Geographic area', 'Indicator', 'OBS_VALUE']]
    
    # Gruppera och beräkna medelvärdet för amningsdata
    aggregated_amning = filtered_amning.groupby(['Geographic area', 'Indicator'], as_index=False)['OBS_VALUE'].mean()
    
    # Filtrera pneumonidata för de valda länderna och Total-värden
    filtered_pneumonia = df_pneumonia[
        (df_pneumonia['Geographic area'].isin(countries)) &
        (df_pneumonia['Wealth Quintile'] == 'Total') &
        (df_pneumonia['Residence'] == 'Total') &
        (df_pneumonia["Mother's Education Level"] == 'Total')
    ]
    
    # Välj relevanta kolumner och byt namn på 'OBS_VALUE' i pneumonidata
    filtered_pneumonia = filtered_pneumonia[['Geographic area', 'OBS_VALUE']]
    filtered_pneumonia = filtered_pneumonia.rename(columns={'OBS_VALUE': 'Pneumonia_Value'})
    aggregated_pneumonia = filtered_pneumonia.groupby('Geographic area')['Pneumonia_Value'].mean().reset_index()
    
    # Slå ihop amnings- och pneumonidata
    merged_data = pd.merge(aggregated_amning, aggregated_pneumonia, on='Geographic area', how='left')
    
    # Spara den sammanslagna datan till en ny CSV-fil
    output_file = "merged_amning_and_pneumonia_data.csv"
    merged_data.to_csv(output_file, index=False)
    print(f"Ny CSV-fil med amningsdata och pneumonidata för valda länder har skapats: {output_file}")

# Exempel på användning:
countries = [
    'Thailand', 'Indonesia', 'Viet Nam', 'Philippines', 'Myanmar', 
    'Cambodia', 'Timor-Leste', "Lao People's Democratic Republic"
]

merge_data_for_countries(countries)
